<html ng-app="saltdashboard">
    <head>
        <title>SaltStack Jobs</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.17/angular.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
        <script src="/static/main.js"></script>
    </head>
    <body ng-controller="SaltController">
        Search by function: <input type="text" ng-model="search.fun">
        <div class="panel-group" id="accordion" role="statelist" aria-multiselectable="true">
            <div ng-repeat="job in jobs | filter:search">
                <div class="panel-heading" role="tab" id="h{{job._id}}">
                    <h4 class="panel-title">
                        <button class="collapsed btn btn-primary" data-toggle="collapse" data-parent="#accordion" ng-click="get_salt_return(job.jid)" href="#c{{job._id}}" aria-expanded="false" aria-controls="c{{job._id}}">
                            {{job.jid}} -> {{job.fun}}
                        </button>
                    </h4>
                </div>
                <div id="c{{job._id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="h{{job._id}}">
                    <div class="panel-body">
                        <pre>{{salt_return[job.jid] | json}}</pre>
                    </div>
                </div>
        </div>
    </body>
</html>
